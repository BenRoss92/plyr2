<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/head %>
  </head>
  <body>
    <!-- Always shows a header, even in smaller screens. -->
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <% include ../partials/header %>
      <main class="mdl-layout__content">
        <div class="page-content">
          <div class="mdl-grid">
            <div class="mdl-cell mdl-cell--12-col mdl-cell--4-col-phone mdl-cell--8-col-tablet">
              <h2><%= title %></h2>
              <div class="mdl-grid">
                <% if (currentUser && currentUser.id != event.UserId && !request) { %>
                  <div class="join_button">
                    <form action="/events/<%= event.id %>/requests/new">
                      <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">Join</button>
                    </form>
                  </div>
                <% } %>
                <% if (currentUser && currentUser.id != event.UserId  && request) { %>
                  <div class="already_joined">
                    Request has been sent.
                  </div>
                <% } %>
              </div>
              <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp full-width" id="event_table">
                <tbody>
                  <tr>
                    <td scope="row" class="mdl-data-table__cell--non-numeric">Location</td>
                    <td><%= event.location %></td>
                  </tr>
                  <tr>
                    <td scope="row" class="mdl-data-table__cell--non-numeric">Sport</td>
                    <td><%= sport.name %></td>
                  </tr>
                  <tr>
                    <td scope="row" class="mdl-data-table__cell--non-numeric">Skill level</td>
                    <td>
                      <% for (var i = 0; i < event.skill; i++) {%>
                        <span class="material-icons">star</span>
                      <% } %>
                      <% for (var i = 0; i < (5 - event.skill); i++) {%>
                        <span class="material-icons">star_border</span>
                      <%}%>
                    </td>
                  </tr>
                  <tr>
                    <td scope="row" class="mdl-data-table__cell--non-numeric">Date</td>
                    <td><%= new Date(event.eventDate).toDateString() %></td>
                  </tr>
                  <tr>
                    <td scope="row" class="mdl-data-table__cell--non-numeric">Time</td>
                    <td><%= event.eventTime %></td>
                  </tr>
                  <tr>
                    <td scope="row" class="mdl-data-table__cell--non-numeric">Description</td>
                    <td><%= event.description %></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </main>
      <footer class="mdl-mini-footer">
          <% include ../partials/footer %>
      </footer>
    </div>
  </body>
</html>
